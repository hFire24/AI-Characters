<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Choose your character!</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Choose Your Character!</h1>
    <h2>Mood Buttons</h2>
    <div id="moodButtons" style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
      <button title="Practical">ğŸ¤”</button>
      <button class="chaos" title="Chaotic">ğŸ¤ª</button>
      <button class="joy" title="Happy">ğŸ˜€</button>
      <button class="sad" title="Unhappy">â˜¹ï¸</button>
      <button class="male" title="Male">â™‚ï¸</button>
      <button class="female" title="Female">â™€ï¸</button>
      <button class="moe0" title="Not Moe">ğŸš«ğŸ©·</button>
      <button class="moe" title="Moe">ğŸ©·</button>
    </div>
    <!--div>
      <label for="prompt">Type in a prompt, and the AI will choose who to select!</label>
      <input type="text" id="prompt" placeholder="Enter your prompt here...">
      <button onclick="getBestCharacter()">Get Character</button>
    </div>
    <div id="result"></div-->
    <!--
      Ideas for prompts:
      Food-related prompts will select characters related to food like Primelle or Celestia.
      Faith-related prompts will select characters like Stephen or Celestia.
      Straightforward prompts will select characters like Joe.
    -->
  </header>
  <main>
    <div class="character gen1">
      <img src="Icons/Felix.png" alt="Felix">
      <h2>Felix</h2>
    </div>
    <div class="character gen1">
      <img src="Icons/Arianna.png" alt="Arianna">
      <h2>Arianna</h2>
    </div>
    <div class="character gen1">
      <img src="Icons/Miki.png" alt="Miki">
      <h2>Miki</h2>
    </div>
    <div class="character gen1">
      <img src="Icons/Draxi.png" alt="Draxi">
      <h2>Draxi</h2>
    </div>
    <!--div class="character gen1">
      <img src="Icons/Ryker.png" alt="Ryker">
      <h2>Ryker</h2>
    </div>
    <div class="character gen1">
      <img src="Icons/Audry.png" alt="Audry">
      <h2>Audry</h2>
    </div>
    <div class="character gen2">
      <img src="Icons/Hammer-chan.png" alt="Hammer-chan">
      <h2>Hammer-chan</h2>
    </div>
    <div class="character gen2">
      <img src="Icons/Darxi.png" alt="Darxi">
      <h2>Darxi</h2>
    </div>
    <div class="character gen3">
      <img src="Icons/Mr. Go.webp" alt="Mr. Go">
      <h2>Mr. Go</h2>
    </div-->
    <div class="character gen3">
      <img src="Icons/Erica.png" alt="Erica">
      <h2>Erica</h2>
    </div>
    <div class="character gen3">
      <img src="Icons/Momo.png" alt="Momo">
      <h2>Momo</h2>
    </div>
    <div class="character gen3">
      <img src="Icons/Runa.png" alt="Runa">
      <h2>Runa</h2>
    </div>
    <div class="character gen4">
      <img src="Icons/Neon Starlight.png" alt="Neon Starlight">
      <h2>Neon Starlight</h2>
    </div>
    <div class="character gen4">
      <img src="Icons/Kai.webp" alt="Kai">
      <h2>Kai</h2>
    </div>
    <div class="character gen4">
      <img src="Icons/Evil Arianna.png" alt="Evil Arianna">
      <h2>Evil Arianna</h2>
    </div>
    <div class="character gen4">
      <img src="Icons/The Shadow Self.png" alt="The Shadow Self">
      <h2>The Shadow Self</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Stephen.png" alt="Stephen">
      <h2>Bro. Nelson</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Mimi.png" alt="Mimi">
      <h2>Mimi</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Malrick.png" alt="Malrick">
      <h2>Malrick</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Joe.png" alt="Joe">
      <h2>Joe</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Primelle.png" alt="Primelle">
      <h2>Primelle</h2>
    </div>
    <div class="character gen5">
      <img src="Icons/Celestia.png" alt="Celestia">
      <h2>Celestia</h2>
    </div>
    <!--div class="character gen6">
      <img src="Icons/Lexi.png" alt="Lexi">
      <h2>Lexi</h2>
    </div-->
    <div class="character gen6">
      <img src="Icons/Liam and Kieran.png" alt="Liam & Kieran">
      <h2>Liam & Kieran</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/Mark.png" alt="Mark">
      <h2>Mark</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/Princess.png" alt="Princess">
      <h2>Princess</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/Martin.png" alt="Martin">
      <h2>Martin</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/Bruce.png" alt="Bruce">
      <h2>Bruce</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/Cliff.png" alt="Cliff">
      <h2>Cliff</h2>
    </div>
    <div class="character gen6">
      <img src="Icons/The AI Devotee.png" alt="The AI Devotee">
      <h2>The AI Devotee</h2>
    </div>
    <div class="character">
      <img src="Icons/Me.png" alt="Me">
      <h2>Me</h2>
    </div>
  </main>
  <!-- Modal Structure -->
  <div id="characterModal">
    <div>
      <button id="closeModal">&times;</button>
      <div class="modalHeader">
        <img id="modalImg" src="" alt="">
        <div id="modalQuestionMark" class="question-mark">?</div>
        <h2 id="modalName"></h2>
        <div>ğŸ¤”:<span id="serious"></span> ğŸ¤ª:<span id="chaos"></span></div>
      </div>
      <div>
        <div id="modalType"></div>
        <div id="pronouns"></div>
        <div id="modalInterests"></div>
        <div id="modalBestFor"></div>
        <div id="modalFact"></div>
        <div id="modalFooter">
          <a id="modalLink" href="#" target="_blank">Chat ğŸ—£ï¸</a> | <span id="modalScreenshot" onclick="takeScreenshot('chara')">Copy Card ğŸ“·</span>
        </div>
      </div>
    </div>
  </div>
  <!-- Mood Modal Structure -->
  <div id="moodModal">
    <div>
      <button id="closeMoodModal">&times;</button>
      <div class="modalHeader">
        <h2 id="moodName"></h2>
        <div id="moodDescription"></div>
      </div>
      <div>
        <div id="characterList"></div>
        <div id="moodFooter">
          <a id="randomLink">Random Character ğŸ”€</a> | <span id="moodScreenshot" onclick="takeScreenshot('mood')">Copy List ğŸ“·</span>
        </div>
      </div>
    </div>
  </div>
  <footer style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
    <button id="screenshotMainBtn">Screenshot All Characters</button> <button onclick="window.location.href='retired.html'">More characters</button>
  </footer>
  <script src="script.js"></script>
  <script>
    // Character details for modal
    let characterDetails = [];
    let cDetailsWoMe = [];

    fetch('characters.json')
      .then(response => response.json())
      .then(data => {
      characterDetails = data.filter(c => c.type === 'active' || c.type === 'me');
      cDetailsWoMe = data.filter(c => c.type === 'active');

      moodDetails.find(m => m.arg === "serious").list = cDetailsWoMe.filter(c => c.serious);
      moodDetails.find(m => m.arg === "chaos").list = cDetailsWoMe.filter(c => c.chaos);
      moodDetails.find(m => m.arg === "joy").list = cDetailsWoMe.filter(c => !c.emotion.includes('sad') && !c.emotion.includes('angry') && !c.emotion.includes('shy') && c.moe >= 4 || c.emotion.includes('joy'));
      moodDetails.find(m => m.arg === "sad").list = cDetailsWoMe.filter(c => c.emotion.includes('sad') || c.emotion.includes('angry'));
      moodDetails.find(m => m.arg === "male").list = cDetailsWoMe.filter(c => c.pronouns === 'he/him');
      moodDetails.find(m => m.arg === "female").list = cDetailsWoMe.filter(c => c.pronouns === 'she/her');
      moodDetails.find(m => m.arg === "moe0").list = cDetailsWoMe.filter(c => c.moe < 4);
      moodDetails.find(m => m.arg === "moe").list = cDetailsWoMe.filter(c => c.moe >= 7);
    })

    const moodDetails = [
      { name: "ğŸ¤” Practical", arg: "serious", description: "Got a question or problem? These characters are straighforward and/or helpful." },
      { name: "ğŸ¤ª Chaotic", arg: "chaos", description: "Whether they're casual, wacky, or have funny reactions, these characters are fun to talk to." },
      { name: "ğŸ˜€ Happy", arg: "joy", description: "If you're happy and you know it, chat with these characters!" },
      { name: "â˜¹ï¸ Unhappy", arg: "sad", description: "These characters often don't feel joy." },
      { name: "Male", arg: "male", description: "The boys are back in town!" },
      { name: "Female", arg: "female", description: "Girls just want to have fun!" },
      { name: "ğŸš«ğŸ©· Not Moe", arg: "moe0", description: "Characters who are not cute in the moe sense." },
      { name: "ğŸ©· Moe", arg: "moe", description: "Characters who are so cute in the moe sense." }
    ]

    const moodButtonsEls = document.querySelectorAll('#moodButtons button');

    const moodName = document.getElementById('moodName');
    const moodDescription = document.getElementById('moodDescription');
    const characterList = document.getElementById('characterList');
    const randomLink = document.getElementById('randomLink');
    const moodModal = document.getElementById('moodModal');
    const closeMoodModal = document.getElementById('closeMoodModal');

    moodButtonsEls.forEach((el, idx) => {
      el.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        const details = moodDetails[idx];
        if (!details) return;
        moodName.textContent = details.name;
        moodDescription.textContent = details.description || 'No description available';
        characterList.innerHTML = '';
        details.list.forEach(character => {
          const chara = document.createElement('div');
          chara.innerHTML = `
            <img src="${character.img}" alt="${character.name}" style="width:32px;height:32px;vertical-align:middle;margin-right:8px;">
            <strong>${character.name}</strong>
            <span style="cursor:pointer;color:#007bff;text-decoration:underline;margin-left:8px;" onclick="moodModal.style.display='none';showCharacterModal('${character.name}')">Details</span>
            <a href="${character.link}" target="_blank" style="margin-left:8px;">Chat</a>
          `;
          characterList.appendChild(chara);
        });
        randomLink.onclick = () => getRandomCharacter(details.list);
        moodModal.style.display = 'flex';
      });
    });

    closeMoodModal.onclick = function() {
      moodModal.style.display = 'none';
    };
    window.addEventListener('click', function(e) {
      if (e.target === moodModal) moodModal.style.display = 'none';
    });

    function showCharacterModal(characterName) {
      const character = characterDetails.find(c => c.name === characterName);
      if (!character) return;

      displayCharacterDetails(character);
    }

    function getRandomCharacter(characters) {
      window.open(characters[Math.floor(Math.random() * characters.length)]['link'], '_blank')
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="screenshot.js"></script>
</body>
</html>